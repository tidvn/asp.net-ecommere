@model TDStore.Areas.Admin.Models.ProductViewModel

<h1>Create Product</h1>

<hr />

<div class="row">
    <div class="col-md-6">
        <form asp-action="Add" method="post">
            <div class="form-group">
                <label asp-for="Name">Product Name</label>
                <input asp-for="Name" class="form-control" />
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Price">Price</label>
                <input asp-for="Price" class="form-control" />
                <span asp-validation-for="Price" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label>Inventory</label>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>SKU</th>
                            <th>Quantity</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="inventoryBody">
                        @* @if (Model.Inventories != null)
                        {
                            foreach (var inventory in Model.Inventories)
                            {
                                <tr>
                                    <td><input type="text" asp-for="@inventory.Name" class="form-control" /></td>
                                    <td><input type="text" asp-for="@inventory.SKU" class="form-control" /></td>
                                    <td><input type="number" asp-for="@inventory.Quantity" class="form-control" /></td>
                                    <td><button type="button" class="btn btn-danger" onclick="deleteInventory(this)"></button></td>
                            </tr>
                        }
                    } *@
                </tbody>
            </table>

            <button type="button" class="btn btn-primary" onclick="addInventory()">Add Inventory</button>
        </div>

        <button type="submit" class="btn btn-success">Create</button>
        <a asp-action="Index" class="btn btn-secondary">Back to List</a>
    </form>
</div>
</div>
@section Scripts {
<script>
function addInventory() {
var row = '<tr>' +
'<td><input type="text" name="Inventories[' + getNewIndex() + '].Name" class="form-control" /></td>' +
'<td><input type="text" name="Inventories[' + getNewIndex() + '].SKU" class="form-control" /></td>' +
'<td><input type="number" name="Inventories[' + getNewIndex() + '].Quantity" class="form-control" /></td>' +
'<td><button type="button" class="btn btn-danger" onclick="deleteInventory(this)">Delete</button></td>' +
'</tr>';
        $("#inventoryBody").append(row);
    }

    function deleteInventory(button) {
        $(button).closest("tr").remove();
    }

    function getNewIndex() {
        return $("#inventoryBody tr").length;
    }
</script>
}
